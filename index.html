// Sekme Geçişleri
function openTab(evt, tabId) {
    document.querySelectorAll('textarea').forEach(t => t.classList.remove('active'));
    document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
    document.getElementById(tabId).classList.add('active');
    evt.currentTarget.classList.add('active');
}

// Kod Çalıştırma
function run() {
    const html = document.getElementById("html-code").value;
    const css = `<style>${document.getElementById("css-code").value}</style>`;
    const js = `<script>${document.getElementById("js-code").value}<\/script>`;
    const output = document.getElementById("output");

    const content = `<!DOCTYPE html><html><head>${css}</head><body>${html}${js}</body></html>`;
    const blob = new Blob([content], { type: 'text/html' });
    output.src = URL.createObjectURL(blob);
}

// --- DÜZELTİLMİŞ KAYDIRMA MANTIĞI ---
const leftPanel = document.getElementById('left-panel');
const dragBar = document.getElementById('drag-bar');
const container = document.getElementById('container');
const outputIframe = document.getElementById('output');

let isDragging = false;

dragBar.addEventListener('mousedown', function(e) {
    isDragging = true;
    // Kaydırma sırasında iframe'in fareyi yakalamasını engelle
    outputIframe.style.pointerEvents = 'none';
    document.body.style.cursor = 'col-resize';
});

document.addEventListener('mousemove', function(e) {
    if (!isDragging) return;

    // Konum hesaplama
    let containerRect = container.getBoundingClientRect();
    let offsetLeft = e.clientX - containerRect.left;
    
    // Yüzdesel genişlik (Min %10, Max %90 sınırları ile)
    let newWidthPercentage = (offsetLeft / containerRect.width) * 100;

    if (newWidthPercentage > 10 && newWidthPercentage < 90) {
        leftPanel.style.width = newWidthPercentage + '%';
    }
});

document.addEventListener('mouseup', function() {
    if (isDragging) {
        isDragging = false;
        // Iframe'i tekrar etkileşime aç
        outputIframe.style.pointerEvents = 'auto';
        document.body.style.cursor = 'default';
    }
});

// Başlangıçta boş kalmasın diye çalıştır
run();
